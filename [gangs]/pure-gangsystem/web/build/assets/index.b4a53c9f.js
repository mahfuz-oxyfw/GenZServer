import{u as g,z as N,j as t,g as y,r as m,a as v,e as w,b as k,h,i as b,k as i,s as x,y as B,x as S}from"./index.f7846f6e.js";const G="_container_1lm29_1",L="_button_1lm29_21",P="_sprayHousing_1lm29_45",$="_sprayBlock_1lm29_65",H="_bottom_1lm29_95",D="_confirm_1lm29_109",E="_chevron_1lm29_149",I="_input_1lm29_187",j="_colourHousing_1lm29_227",A="_colourBlock_1lm29_241",F="_tick_1lm29_263",a={container:G,button:L,sprayHousing:P,sprayBlock:$,bottom:H,confirm:D,chevron:E,input:I,colourHousing:j,colourBlock:A,tick:F},z=r=>{const e=g(s=>s.config.theme),p=N(r.permission);return p?t("div",{className:a.button,style:{background:e.boxBackground,border:`0.3vw solid ${e.boxBorder}`,color:e.boxText},onClick:()=>{!p||r.function()},children:t("h1",{style:{fontSize:"1.35vw"},children:r.text})}):t(y,{})},M=r=>{const e=g(n=>n.config.theme),p=g(n=>n.config.language),s=g(n=>n.gangData.font),[d,l]=m.exports.useState(s),u=v();return m.exports.useEffect(()=>{w()}),k(y,{children:[t("div",{className:a.sprayHousing,children:Array.from({length:6},(n,c)=>t("div",{className:a.sprayBlock+" center-ripple",id:"ripple-animation",onClick:()=>{l(c)},style:{backgroundImage:`url(sprays/spray${c+1}.png)`,border:`0.3vw solid ${d===c?e.whiteText:e.inputText}`}},c))}),k("div",{className:a.bottom,children:[t("div",{className:a.chevron+" center-ripple",id:"ripple-animation",style:{background:e.boxBorder,color:e.whiteText,border:`0.25vw solid ${e.boxBorder}`},onClick:()=>{r.back(!1)},children:"<"}),t("div",{className:a.confirm+" center-ripple",id:"ripple-animation",style:{background:e.boxBorder,color:e.whiteText,border:`0.25vw solid ${e.boxBorder}`},onClick:()=>{u(h({showPopup:!0,popupText:p.popup.changeSpray,popupType:"confirm",onSubmit:()=>{b("changeDetails",{type:"spray",data:d}),r.back(!1),u(i())},onCancel:()=>{u(i())}}))},children:p.confirm})]})]})},R=r=>{const e=g(o=>o.config.theme),p=g(o=>o.config.config),s=g(o=>o.config.language),d=g(o=>o.gangData.gangName),[l,u]=m.exports.useState(d),n=v();m.exports.useEffect(()=>{w()});const c=()=>{const o=p.createGangChecks.name.minLength,f=p.createGangChecks.name.maxLength,_=s.checking.minLength+o+s.characters,T=s.checking.maxLength+f+s.characters;if(l.length<o)return n(h({showPopup:!0,popupText:_,popupType:"confirm",onSubmit:()=>{n(i())},onCancel:()=>{n(i())}})),!1;if(l.length>f)return n(h({showPopup:!0,popupText:T,popupType:"confirm",onSubmit:()=>{n(i())},onCancel:()=>{n(i())}})),!1;const C='[!@#$%^&*(),.?":{}|<>]';return new RegExp(C).test(l)?(n(h({showPopup:!0,popupText:s.checking.specialCharacters,popupType:"confirm",onSubmit:()=>{n(i())},onCancel:()=>{n(i())}})),!1):!0};return k(y,{children:[t("input",{className:a.input,type:"text",style:{background:e.popup.inputBackground,color:e.boxText,border:`0.15vw solid ${e.boxBorder}`,marginTop:"-4vh"},onChange:o=>{u(o.target.value)},value:l,placeholder:s.createGang.name}),k("div",{className:a.bottom,children:[t("div",{className:a.chevron+" center-ripple",id:"ripple-animation",style:{background:e.boxBorder,color:e.whiteText,border:`0.25vw solid ${e.boxBorder}`},onClick:()=>{r.back(!1),n(x(!1))},children:"<"}),t("div",{className:a.confirm+" center-ripple",id:"ripple-animation",style:{background:e.boxBorder,color:e.whiteText,border:`0.25vw solid ${e.boxBorder}`},onClick:()=>{!c()||n(h({showPopup:!0,popupText:s.popup.changeName,popupType:"confirm",onSubmit:()=>{b("changeDetails",{type:"name",data:l}),r.back(!1),n(i())},onCancel:()=>{n(i())}}))},children:s.confirm})]})]})},W=r=>{const e=g(c=>c.config.theme),p=g(c=>c.createGang.gangColours),s=g(c=>c.config.language),d=g(c=>c.gangData.colour),l=v(),[u,n]=m.exports.useState(d);return m.exports.useEffect(()=>{w()}),k(y,{children:[t("div",{className:a.colourHousing,children:p.map((c,o)=>t("div",{className:a.colourBlock+" center-ripple",id:"ripple-animation",onClick:()=>{n(o)},style:{background:c.hexColour,border:`0.2vw solid ${u===o?e.whiteText:e.inputText}`},children:u===o&&t("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",className:a.tick,children:t("path",{d:"M4.89163 13.2687L9.16582 17.5427L18.7085 8",stroke:e.whiteText,strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})},o))}),k("div",{className:a.bottom,children:[t("div",{className:a.chevron+" center-ripple",id:"ripple-animation",style:{background:e.boxBorder,color:e.whiteText,border:`0.25vw solid ${e.boxBorder}`},onClick:()=>{r.back(!1),l(x(!1))},children:"<"}),t("div",{className:a.confirm+" center-ripple",id:"ripple-animation",style:{background:e.boxBorder,color:e.whiteText,border:`0.25vw solid ${e.boxBorder}`},onClick:()=>{l(h({showPopup:!0,popupText:s.popup.changeColour,popupType:"confirm",onSubmit:()=>{b("changeDetails",{type:"colour",data:u}),r.back(!1),l(i())},onCancel:()=>{l(i())}}))},children:s.confirm})]})]})},K=()=>{const r=g(o=>o.config.language),[e,p]=m.exports.useState(!1),[s,d]=m.exports.useState(!1),[l,u]=m.exports.useState(!1),n=v();m.exports.useEffect(()=>{if(!e&&!s&&!l)return;const o=f=>{["Escape"].includes(f.code)&&(n(i()),n(x(!1)),p(!1),d(!1),u(!1))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[l,s,e]);const c=[{text:r.settings.changeGangColour,permission:"changeSettings",function:()=>{p(!0),n(x(!0))}},{text:r.settings.changeGangSpray,permission:"changeSettings",function:()=>{d(!0),n(x(!0))}},{text:r.settings.changeGangName,permission:"changeSettings",function:()=>{u(!0),n(x(!0))}},{text:r.settings.disbandGang,permission:"disbandGang",function:()=>{n(h({showPopup:!0,popupText:r.popup.disbandGang,popupType:"confirm",onSubmit:()=>{b("disbandGang",{}),n(i()),b("hideFrame",{})},onCancel:()=>{n(i())}}))}},{text:r.settings.leaveGang,permission:"user",function:()=>{n(h({showPopup:!0,popupText:r.popup.leaveGang,popupType:"confirm",onSubmit:()=>{B("leaveGang",{},{success:!1,reason:"retard - cannot leave gang!"}).then(o=>{o.success&&(n(i()),b("hideFrame",{})),n(S(o.reason))})},onCancel:()=>{n(i())}}))}}];return s?t("div",{className:a.container,children:t(M,{back:d})}):l?t("div",{className:a.container,children:t(R,{back:u})}):e?t("div",{className:a.container,children:t(W,{back:p})}):t("div",{className:a.container,children:c.map((o,f)=>t(z,{text:o.text,permission:o.permission,function:o.function},f))})};export{K as default};
